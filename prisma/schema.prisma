generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model article {
  id_article Int      @id @default(autoincrement())
  id_writer  Int
  title      String   @db.VarChar(250)
  date       DateTime @db.Date
  views      Int
  image_url  String
  text       String
  writer     users    @relation(fields: [id_writer], references: [id_user], onDelete: Cascade)
  saved      saved[]
}

model article_has_categories {
  articles_id_article      Int
  categories_id_categories Int
  category  categories @relation(fields: [categories_id_categories],references: [id_category],onDelete: Cascade)
  @@id([articles_id_article, categories_id_categories])
}

model categories {
  id_category Int    @id @default(autoincrement())
  cat_name    String @unique @db.VarChar(45)

  article_has_categories article_has_categories[]
}

model follower {
  id_follower  Int
  id_following Int
  follower     users    @relation("FollowerToUser", fields: [id_follower], references: [id_user])
  following    users    @relation("FollowingToUser", fields: [id_following], references: [id_user])

  @@id([id_follower, id_following])
}

model saved {
  id_user    Int
  id_article Int
  date       String @db.VarChar(45)
  user       users   @relation(fields: [id_user], references: [id_user])
  article    article @relation(fields: [id_article], references: [id_article])

  @@id([id_user, id_article])
}

model trend_article {
  articles_id_article Int      @id
  title               String   
  date                DateTime @db.Date
  author              String   
  image_url           String
  views               Int
  text                String
  weight              Decimal
}

model trend_author {
  users_id_user Int    @id
  username      String @unique 
  name          String @db.VarChar(45)
  lastname      String @db.VarChar(45)
  profession    String 
  weight        Decimal
}

model users {
  id_user     Int       @id @default(autoincrement())
  username    String    @unique
  name        String    @db.VarChar(45)
  hash        String
  lastname    String    @db.VarChar(45)
  rol         Int
  profession  String?   
  description String?
  image_url   String?
  article     article[]
  followers   follower[] @relation("FollowerToUser")
  followings  follower[] @relation("FollowingToUser")
  saved       saved[]
}
